{
  "number": 912,
  "repo": "mRemoteNG/mRemoteNG",
  "title": "RDP Disconnected 6151",
  "state": "open",
  "labels": [
    "Bug"
  ],
  "author": "ibrahim052",
  "created_at": "2018-03-09T12:25:13Z",
  "github_updated_at": "2019-03-04T05:04:11Z",
  "body_snippet": "Its mainly for accessing Server 2016 RDP, I keep facing this error where I have to check and uncheck NETWORK LEVEL AUTHENTICATION accessing the server physically to be accessible by MRemoteNG, doesn't happen in 2012 but happens often in 2016. Specially when I have to reboot the server due to maintenance or updates.\r\n\r\n![image](https://user-images.githubusercontent.com/37214257/37207438-6e8eb0e8-23b6-11e8-98ad-78fc80812836.png)\r\n",
  "our_status": "triaged",
  "priority": "P3-enhancement",
  "target_release": null,
  "our_branch": null,
  "our_pr": null,
  "iterations": [
    {
      "seq": 1,
      "date": "2026-02-16",
      "type": "triaged",
      "description": "The issue lacks reproducible steps and diagnostic details, and the latest comments indicate a backup-based recovery rather than a confirmed persistent defect."
    },
    {
      "seq": 2,
      "date": "2026-02-16",
      "type": "triaged",
      "description": "The report is ambiguous and non-reproducible because the title suggests an RDP 6151 disconnect while the comments describe a password prompt after an unexpected shutdown."
    },
    {
      "seq": 3,
      "date": "2026-02-17",
      "type": "triaged",
      "description": "Error code 6151 (0x1807) is an unhandled RDP disconnect reason indicating authentication authority issues or domain trust failures, often related to NLA; a friendly error message should be added."
    }
  ],
  "comments": [
    {
      "id": "MDEyOklzc3VlQ29tbWVudDM4MjA0NjE2Mg==",
      "author": "sparerd",
      "date": "2018-04-17T15:57:33Z",
      "snippet": "Seems related to #220. This may be an issue between the version of the mstsc RDP library that we use and Windows Server 2016. I am doing some work in v1.77 to improve RDP compatibility (#826) that might help with this.",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDM4MjA0ODI4Mw==",
      "author": "ibrahim052",
      "date": "2018-04-17T16:03:39Z",
      "snippet": "Amazing. I still face this issue. Had tried alpha which doesn't have this problem at all but then ;-) other bugs are there plus stable is so stable. I am trying to manage somehow but it's a pain when it happens with a guest os as vm and then I have to access it physically to disable NLA or sometime check it again if unchecked.\r\n\r\n\r\n\r\nOn April 17, 2018 7:57:50 PM David Sparer <notifications@github.com> wrote:\r\n\r\nSeems related to #220<https://github.com/mRemoteNG/mRemoteNG/issues/220>. This may be...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDI5Nzc3Mg==",
      "author": "ibrahim052",
      "date": "2019-01-15T07:53:21Z",
      "snippet": "I am sorry if I am asking too much but it happened that my mremoteng stopped working and didn't start at all. It appears on task manager and disappears immediately. I tried installing the latest pre release to try my luck and to my bad luck I realized that my settings were encrypted. Now I am unable to retain the settings. I am stuck, I tried to install the previous version but it's same. If there is any charges I would be happy to contribute as donation but this problem would cost my job becaus...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDQwNTg4MA==",
      "author": "sparerd",
      "date": "2019-01-15T14:14:23Z",
      "snippet": "I'm sorry this has happened to you, @ibrahim052. Here are several pages that may be able to help. First, try to recover the last good backup of your connections file. Also, take a look at the log file to see what may be causing the application to stop working. You can also try deleting the user settings file. We have seen it cause startup problems if it is corrupted.\r\n\r\n- https://github.com/mRemoteNG/mRemoteNG/wiki/Backups-and-Recovery\r\n- https://github.com/mRemoteNG/mRemoteNG/wiki/Troubleshooti...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDQ2Mjg4NQ==",
      "author": "ibrahim052",
      "date": "2019-01-15T16:46:24Z",
      "snippet": "Tried renaming and to open the backup file, this is what I get. I had a whole half day of depression of making a mistake not taking any backup. I hope this gets resolved.\n\n[cid:image001.png@01D4AD13.5BD61E50]\n\nSent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10\n\n________________________________\nFrom: David Sparer <notifications@github.com>\nSent: Tuesday, January 15, 2019 6:14:32 PM\nTo: mRemoteNG/mRemoteNG\nCc: ibrahim052; Mention\nSubject: Re: [mRemoteNG/mRemoteNG] RDP Di...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDQ2NzA2Ng==",
      "author": "sparerd",
      "date": "2019-01-15T16:56:56Z",
      "snippet": "(If you've included an image, I am not able to see it. Images in emails do not get transferred to GitHub)\r\n\r\nYou may need to go back to an older backup. Checking the file size of the backups may help determine the last good backup (look for the largest file).",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDQ3MTc4NQ==",
      "author": "ibrahim052",
      "date": "2019-01-15T17:09:44Z",
      "snippet": "Alright, sir you are GENIUS. This is what I did, from AppData\\Roaming\\mRemoteNG\\mRemoteNG.exe_Urlxxxxxxxxx current version folder I copied the user.config file to\nAppData\\Local\\mRemoteNG\\mRemoteNG.exe_Url_xxxxx renaming existing user.config and placing the copied one resolved the issue. WOOOHOOOOOOOOOOOOOO, still donating as promised. Phewwwww THANK YOU THANK YOU THANK YOU.\n\nSent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10\n\n________________________________\nFrom: Ibra...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDQ3ODQxNA==",
      "author": "ibrahim052",
      "date": "2019-01-15T17:28:00Z",
      "snippet": "Thank you for saving my day, your concern and response was enough to push me for giving it a try one more time. Made a small contribution to my favorite app which I use most.\n\nSent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10\n\n________________________________\nFrom: Ibrahim Rasheed <ibrahim52@outlook.com>\nSent: Tuesday, January 15, 2019 9:09:37 PM\nTo: mRemoteNG/mRemoteNG; mRemoteNG/mRemoteNG\nCc: Mention\nSubject: RE: [mRemoteNG/mRemoteNG] RDP Disconnected 6151 (#912)\n\nA...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ1NDUzOTkyOQ==",
      "author": "sparerd",
      "date": "2019-01-15T20:30:40Z",
      "snippet": "Glad to hear that you got it working! :)",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ2OTAwMjA5MA==",
      "author": "ibrahim052",
      "date": "2019-03-03T08:51:52Z",
      "snippet": "I am sorry but it happened that MremoteNG was on , I lost battery and laptop switched off unexpectedly. After that as usual when I am trying to open mremoteng , it doesnâ€™t work and ask for password. Unfortunately there are no automatic backup as well since I emailed you last. Followed the same steps of solution I discovered last time but does not work this time.\n\nSent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10\n\n________________________________\nFrom: David Sparer <no...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ2OTExOTkxNA==",
      "author": "ibrahim052",
      "date": "2019-03-04T05:04:11Z",
      "snippet": "Never mind, the backup of back in jan 15 was still sufficient. Thank you but please if you can fix the surprise shutdown issue in future. Have a nice day.\n\nSent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10\n\n________________________________\nFrom: Ibrahim Rasheed <ibrahim52@outlook.com>\nSent: Sunday, March 3, 2019 12:51:45 PM\nTo: mRemoteNG/mRemoteNG; mRemoteNG/mRemoteNG\nCc: Mention\nSubject: RE: [mRemoteNG/mRemoteNG] RDP Disconnected 6151 (#912)\n\nI am sorry but it happen...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    }
  ],
  "comments_cursor": "2019-03-04T05:04:11Z",
  "unread_comments": 11,
  "needs_action": true,
  "waiting_for_us": true,
  "last_synced": "2026-02-15T09:52:50Z",
  "notes": "AI triage (codex): The issue lacks reproducible steps and diagnostic details, and the latest comments indicate a backup-based recovery rather than a confirmed persistent defect.\nApproach: Request exact version, repro sequence after power loss, logs, and sample affected config file, then verify whether saves/backups are atomic under unexpected shutdown.\nAI triage (codex): The report is ambiguous and non-reproducible because the title suggests an RDP 6151 disconnect while the comments describe a password prompt after an unexpected shutdown.\nApproach: Ask for exact reproduction steps, logs/error text, and whether the failure is an RDP session disconnect or connection-file recovery/encryption issue after power loss.\nAI triage (gemini): Error code 6151 (0x1807) is an unhandled RDP disconnect reason indicating authentication authority issues or domain trust failures, often related to NLA; a friendly error message should be added.\nApproach: In 'RDPEvent_OnDisconnected', add a check for disconnect reason 6151 (0x1807) and set a descriptive error message advising the user to check NLA settings or domain trust."
}
