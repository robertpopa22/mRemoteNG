{
  "number": 859,
  "repo": "mRemoteNG/mRemoteNG",
  "title": "All RDP connections dropped when new connection can't establish",
  "state": "open",
  "labels": [
    "Need 2 check"
  ],
  "author": "sierramike",
  "created_at": "2018-01-08T08:36:16Z",
  "github_updated_at": "2026-02-21T10:23:00Z",
  "body_snippet": "Hello,\r\n\r\nI noticed a more and more annoying bug : \r\nI usually have several RDP connections open at the same time to multiple servers. When connecting to another one which doesn't respond, all active RDP connections are dropped causing them to reconnect, which takes time as these are remote servers.\r\n\r\nThis doesn't happen when using Remote Desktop Connection Manager, not the windows default RDP client.",
  "our_status": "triaged",
  "priority": "P2-bug",
  "target_release": null,
  "our_branch": null,
  "our_pr": null,
  "iterations": [
    {
      "seq": 1,
      "date": "2026-02-16",
      "type": "triaged",
      "description": "The report lacks reproducible steps, version details, and logs, and it has remained inactive despite maintainers requesting that information."
    },
    {
      "seq": 2,
      "date": "2026-02-17",
      "type": "triaged",
      "description": "The reconnect timer runs on a background thread but accesses UI/ActiveX controls, causing cross-thread violations that likely drop connections; switching to System.Windows.Forms.Timer fixes this."
    },
    {
      "seq": 3,
      "date": "2026-02-17",
      "type": "triaged",
      "description": "ProtocolBase.CloseBG accesses UI components (tmrReconnect) and fires events modifying shared collections from a background thread, causing race conditions and potential stability issues."
    }
  ],
  "comments": [
    {
      "id": "MDEyOklzc3VlQ29tbWVudDM2MTQxNzc0OQ==",
      "author": "sparerd",
      "date": "2018-01-29T23:04:36Z",
      "snippet": "Does the mRemoteNG.log show anything when this reconnect happens? What version of mRemoteNG are you running?",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "IC_kwDOAAcIMM7mXEDQ",
      "author": "robertpopa22",
      "date": "2026-02-07T16:40:29Z",
      "snippet": "\"%MSG%\"",
      "is_ours": true,
      "analyzed": false,
      "action_needed": false
    },
    {
      "id": "IC_kwDOAAcIMM7mXF_p",
      "author": "robertpopa22",
      "date": "2026-02-07T16:47:43Z",
      "snippet": "Triage refresh (P2): this issue has been inactive for a long time. Please retest on the latest build and share reproducible steps, expected vs actual behavior, and logs/screenshots. If there is no confirmation/update, maintainers can close it as stale or not reproducible.",
      "is_ours": true,
      "analyzed": false,
      "action_needed": false
    }
  ],
  "comments_cursor": "2026-02-21T10:23:00Z",
  "unread_comments": 1,
  "needs_action": true,
  "waiting_for_us": false,
  "last_synced": "2026-02-21T12:06:48Z",
  "notes": "AI triage (codex): The report lacks reproducible steps, version details, and logs, and it has remained inactive despite maintainers requesting that information.\nApproach: Request a retest on the latest build with exact repro steps, expected vs actual behavior, and relevant mRemoteNG.log entries, then close as stale/not reproducible if no update arrives.\nAI triage (gemini): The reconnect timer runs on a background thread but accesses UI/ActiveX controls, causing cross-thread violations that likely drop connections; switching to System.Windows.Forms.Timer fixes this.\nApproach: Change tmrReconnect to System.Windows.Forms.Timer in ProtocolBase.cs and update the event handler signature in RdpProtocol.cs to use EventArgs.\nAI triage (gemini): ProtocolBase.CloseBG accesses UI components (tmrReconnect) and fires events modifying shared collections from a background thread, causing race conditions and potential stability issues.\nApproach: Refactor CloseBG to marshal thread-unsafe operations to the UI thread."
}
