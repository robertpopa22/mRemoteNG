{
  "number": 330,
  "repo": "mRemoteNG/mRemoteNG",
  "title": "Dismiss Tab Context Menu When Clicking Inside RDP Frame",
  "state": "open",
  "labels": [
    "Verified",
    "Priority - Low",
    "Bug",
    "Help Wanted",
    "UI/UX"
  ],
  "author": "jcefoli",
  "created_at": "2017-01-06T21:41:03Z",
  "github_updated_at": "2026-02-20T13:36:37Z",
  "body_snippet": "<!-- Bug -->\r\nWhen you right click on a connection tab to bring up the context menu, clicking within the RDP frame does not dismiss the menu. Since all input is passed through to the RDP session, mRemoteNG's GUI doesn't understand I've clicked elsewhere and the menu  is not dismissed. I tend to do this a lot, and the menu gets in my way which forces me to stop what I'm doing in my remote session and click somewhere in the mRemoteNG GUI to dismiss it. \r\n\r\nThis is minor, so if it's an easy fix, go...",
  "our_status": "testing",
  "priority": "P2-bug",
  "target_release": null,
  "our_branch": null,
  "our_pr": null,
  "iterations": [
    {
      "seq": 1,
      "date": "2026-02-15",
      "type": "triaged",
      "description": "Confirmed UI bug where the tab context menu stays visible after clicking inside an RDP session frame, with root cause already identified in ConnectionWindow.cs WndProc handling of WM_MOUSEACTIVATE."
    },
    {
      "seq": 2,
      "date": "2026-02-15",
      "type": "testing",
      "description": "Fix in 9a9669cf"
    }
  ],
  "comments": [
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTA0Mzk0Ng==",
      "author": "kmscode",
      "date": "2017-01-07T00:10:51Z",
      "snippet": "It's unlikely that we'll be able to do anything about this... The click inside the RDP session is sent to the remote host and not processed locally at all... ",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTA3MDI2NA==",
      "author": "rtabernero",
      "date": "2017-01-07T08:14:56Z",
      "snippet": "Hello all,\n\nWhat about handling lost of focus instead?\n\nGreetings,\n\n--\nR. Tabernero\n\n> El 7 ene 2017, a las 1:10, Sean Kaim <notifications@github.com> escribió:\n> \n> It's unlikely that we'll be able to do anything about this... The click inside the RDP session is sent to the remote host and not processed locally at all...\n> \n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTA5OTIxOQ==",
      "author": "sparerd",
      "date": "2017-01-07T17:59:42Z",
      "snippet": "We ***may*** be able to get around the click issue by overlaying some kind of click-catcher on top of the RDP session window. That overlay would capture click events and pass them on to the highest Z-order control under the click location (menu, RDP session, popup, etc).\r\n\r\nConcerns with this approach:\r\n- This adds some overhead to RDP sessions.\r\n- Adds a significant amount of complexity. The overlay would need to grow/shrink/move with its RDP session. The hit-testing could get complex pretty qu...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTMwMTgxNg==",
      "author": "jcefoli",
      "date": "2017-01-09T14:45:50Z",
      "snippet": "If it requires any kind of latent, click catching workarounds, don't even worry about it. Not a fan of dirty hacks. I was just curious if it was easy or not. I can change my usage behavior so I stop doing that!",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTMxMTAxNw==",
      "author": "sparerd",
      "date": "2017-01-09T15:20:57Z",
      "snippet": "Unfortunately the RDP activex control doesn't make this easy. It's a black hole :(",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTMxNTIwNQ==",
      "author": "kmscode",
      "date": "2017-01-09T15:35:58Z",
      "snippet": "I'm researching and testing a few ideas now... No promises though...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDI3MTMzNTA0NA==",
      "author": "kmscode",
      "date": "2017-01-09T16:39:46Z",
      "snippet": "The \"problem\" is here (\\mRemoteNG\\mRemoteV1\\UI\\Window\\ConnectionWindow.cs):\r\n```\r\n        protected override void WndProc(ref Message m)\r\n        {\r\n            try\r\n            {\r\n                if (m.Msg == NativeMethods.WM_MOUSEACTIVATE)\r\n                {\r\n                    var selectedTab = TabController.SelectedTab;\r\n                    if (selectedTab == null) return;\r\n                    {\r\n                        var tabClientRectangle = selectedTab.RectangleToScreen(selectedTab.Clie...",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDQ3MTIzNzUyOA==",
      "author": "kmscode",
      "date": "2019-03-10T01:21:50Z",
      "snippet": "FYI - confirmed that this still occurs in the current develop branch with the magiclib removal. Though, that's to be expected.... ",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    }
  ],
  "comments_cursor": "2026-02-20T13:36:37Z",
  "unread_comments": 8,
  "needs_action": true,
  "waiting_for_us": true,
  "last_synced": "2026-02-21T06:14:50Z",
  "notes": "AI triage: Confirmed UI bug where the tab context menu stays visible after clicking inside an RDP session frame, with root cause already identified in ConnectionWindow.cs WndProc handling of WM_MOUSEACTIVATE.\nApproach: In the WM_MOUSEACTIVATE handler in ConnectionWindow.WndProc, dismiss any open context menu (via ContextMenuStrip.Close() or similar) before processing the mouse activation message, so clicking into the RDP frame closes the stale context menu."
}
