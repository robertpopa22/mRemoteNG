{
  "number": 1666,
  "repo": "mRemoteNG/mRemoteNG",
  "title": "Session is unlocked by restoring down or maximizing the window",
  "state": "open",
  "labels": [
    "Bug",
    "Improvement required"
  ],
  "author": "YacineLF",
  "created_at": "2020-01-07T09:51:44Z",
  "github_updated_at": "2023-11-29T07:17:30Z",
  "body_snippet": "<!--- Provide a general summary of the issue in the Title above -->\r\nSession is unlocked by restoring down or maximizing the window\r\n\r\n## Expected Behavior\r\n<!--- If you're describing a bug, tell us what should happen -->\r\n<!--- If you're suggesting a change/improvement, tell us how it should work -->\r\nThe session should stay locked, requesting the user password\r\n\r\n## Current Behavior\r\n<!--- If describing a bug, tell us what happens instead of the expected behavior -->\r\n<!--- If suggesting a cha...",
  "our_status": "triaged",
  "priority": "P1-security",
  "target_release": null,
  "our_branch": null,
  "our_pr": null,
  "iterations": [
    {
      "seq": 1,
      "date": "2026-02-21",
      "type": "triaged",
      "description": "Window restore/maximize events bypass the master password session lock, allowing unauthorized access to connections — a security regression related to the autolock feature (#1649).",
      "token_usage": {
        "input_tokens": 3,
        "output_tokens": 434,
        "cost_usd": 0.121598,
        "operations": 1
      }
    }
  ],
  "comments": [
    {
      "id": "MDEyOklzc3VlQ29tbWVudDU3MTU1NjY5MQ==",
      "author": "kees-z",
      "date": "2020-01-07T11:54:27Z",
      "snippet": "I guess this is by design. mRemoteNG reconnects to the host in order to set the resolution to the changed window size.\r\nBecause the credentials are stored in the XML file, locking a session inside mRemoteNG doesn't protect you against reconnecting.\r\nRight clicking the tab and choosing Reconnect has the same effect as you describe.\r\n\r\nLocking your local PC before you walk away is the safest way to prevent unwanted connections.",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDU3NTk2MjMzNw==",
      "author": "delanojack",
      "date": "2020-01-19T03:17:50Z",
      "snippet": "I was able to reproduce this bug without the credential being stored and its bypassing two-factor authentication. Tested on Windows 2019 server and windows 2012 server.\r\n\r\nIt does not happen with 2012 server.",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "MDEyOklzc3VlQ29tbWVudDU3NjE3Mzk2OA==",
      "author": "kees-z",
      "date": "2020-01-20T08:59:51Z",
      "snippet": "I can also reproduce this. When connections are not stored in the Connections file, mRemoteNG asks for credentials when using the integrated \"Reconnect\" option, but unlocks the session immediately whenever the resolution changes (resizing, maximizing the mRemoteNG window).\r\nI agree, looks like this is a bug.\r\nAs a workaround, you can set the resolution to \"Smart size\" for your connections. This will keep the initial RDP resolution, even when the mRemote panel's resolution changes.",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "IC_kwDOAAcIMM5tIr6O",
      "author": "esher72",
      "date": "2023-11-29T00:24:57Z",
      "snippet": "So I stumbled on this today and thought I was going crazy. How is this an mRemoteNG issue? Windows shouldn't unlock the session without credentials. I'd think this is a Windows bug. ",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    },
    {
      "id": "IC_kwDOAAcIMM5tKA9U",
      "author": "simonai1254",
      "date": "2023-11-29T07:17:29Z",
      "snippet": "> So I stumbled on this today and thought I was going crazy. How is this an mRemoteNG issue? Windows shouldn't unlock the session without credentials. I'd think this is a Windows bug.\r\n\r\nFor this see #1809, it's default behavior when reconnecting (which is what mRemoteNG does by default when the window size changes)",
      "is_ours": false,
      "analyzed": false,
      "action_needed": true
    }
  ],
  "comments_cursor": "2023-11-29T07:17:30Z",
  "unread_comments": 5,
  "needs_action": true,
  "waiting_for_us": true,
  "last_synced": "2026-02-15T09:52:50Z",
  "notes": "AI triage (claude): Window restore/maximize events bypass the master password session lock, allowing unauthorized access to connections — a security regression related to the autolock feature (#1649).\nApproach: In frmMain's WndProc or SizeChanged/Resize handler, detect WM_SIZE with SIZE_RESTORED/SIZE_MAXIMIZED while session is locked and re-apply the lock (hide connections panel, show password prompt) before the window becomes visible/interactive.",
  "token_usage": {
    "input_tokens": 3,
    "output_tokens": 434,
    "cost_usd": 0.121598
  }
}
